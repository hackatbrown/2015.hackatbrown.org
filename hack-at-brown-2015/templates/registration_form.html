<div class='panel double_right'>
    <form action='{{ registration_post_url }}' id='registration_form' class='registration_form ui form' method='POST' enctype="multipart/form-data">

        <div class="two fields">
            <div class="field">
                <label for="name">Name</label>
                <input type="text" name="name" placeholder="Josiah Carberry" required/>
            </div>
            <div class="field">
                <label for="name">Email</label>
                <input type="email" name="email" placeholder="handle@schooldomain.edu" required/>
            </div>
        </div>
        
        <div class="two fields">
            <div class="field">
                <div class="two fields">
                    <div class="field ui-widget">
                        <label for="school">School</label>
                        <input type="text" name="school" class="schools" placeholder="Beige University" required/>
                    </div>
                    <div class="field">
                        <label for="year">Year</label>
                        <input type="text" name="year" placeholder="2017" required/>
                    </div>
                </div>
            </div>
            <div class="field">
                <label>T-Shirt Size</label>
                    <div class="shirt_size">
                        <table class="radio_select center">
                            <tr>
                                <td>
                                    <input type="radio" name="shirt_gen" id="sgM" value='M' />
                                    <label for="sgM">Men's</label>
                                </td>
                                <td>
                                    <input type="radio" name="shirt_gen" id="sgW" value='W' />
                                    <label for="sgW">Women's</label>
                                </td>
                             </tr>
                        </table>
                
                        <table class="radio_select center">
                            <tr>
                                <td>
                                    <input type="radio" name="shirt_size" id="ssXS" value='XS' />
                                    <label for="ssXS">XS</label>
                                </td>
                                <td>
                                    <input type="radio" name="shirt_size" id="ssS" value='S' />
                                    <label for="ssS">S</label>
                                </td>
                                <td>
                                    <input type="radio" name="shirt_size" id="ssM" value='M' />
                                    <label for="ssM">M</label>
                                </td>
                                <td>
                                    <input type="radio" name="shirt_size" id="ssL" value='L' />
                                    <label for="ssL">L</label>
                                </td>
                                <td>
                                    <input type="radio" name="shirt_size" id="ssXL" value='XL' />
                                    <label for="ssXL">XL</label>
                                </td>
                                <td>
                                    <input type="radio" name="shirt_size" id="ssXXL" value='XXL' />
                                    <label for="ssXXL">XXL</label>
                                </td>
                            </tr>
                        </table>
                    </div>
            </div>
        </div>
        
        <div class="field">
            <label for="dietary_restrictions">Any dietary restrictions?</label>
            <ul name="dietary_restrictions" class="tagit diet"></ul>
        </div>

        <div class="field">
            <label for="teammates">Friends You'd Like to Work With (Limit 3 Emails)</label>
            <ul name="dietary_restrictions" class="tagit team"></ul>
        </div>
        
        <div class="two fields">
            <div class="field">
                <label for="resume">Upload Resume</label>
                <input type="file" name="resume" id="resume" />

                <label for="hardware_hack">Hardware Hack?</label>
                    <table class="radio_select">
                        <tr>
                            <td>
                                <input type="radio" name="hardware_hack" id="hardware_yes" value='yes' />
                                <label for="hardware_yes">Yes!</label>
                            </td>
                            <td>
                                <input type="radio" name="hardware_hack" id="hardware_no" value='no' />
                                <label for="hardware_no">Nah</label>
                            </td>
                        </tr>
                    </table>
            </div>

            <div class="field">
                <label for="links">Links (optional)</label>
                <input type="text" name="links" id="link" placeholder="Github, Dribbble, Behance, etc." /> <br />
            </div>
        </div>

        <div class="inline field center">
            <label for="agree" class="check_agree">I agree to the Code of Conduct</label>
            <input type="checkbox" name="agree" id="agree"/>
        </div>
        <div class="field center">
            <input type="submit" class="ui button" vlaue="REGISTER" />
        </div>
    </form>
</div>
<div class="clearfix"></div>

<script src='/static/js/H5F.js'></script> <!-- a polyfill that adds HTML5 form validation features to older browsers -->
<script src="http://code.jquery.com/ui/1.11.2/jquery-ui.js"></script>
<script src="/static/Tagit/js/tag-it.js"></script>

<script>
function validateForm() {
    // Check if they filled out shirt gender & size
    if (!$("input[name='shirt_gen']:checked").val())
        return false;
    if (!$("input[name='shirt_size']:checked").val())
        return false;

    // Check if they filled out travel reimbursement
    if (!$("input[name='travel_reimbursement']:checked").val())
        return false;

    // Check if they filled out hardware hack
    if (!$("input[name='hardware_hack']:checked").val())
        return false;

    // Check if they agree to the Code of Conduct
    if (!$("#agree").prop('checked'))
        return false;

    return true;
}

$(document).ready(function() {
    H5F.setup(document.getElementById("registration_form"), {
        onSubmit: function(e) {
            if (validateForm()) {
                $("#registration_form input[type=submit]").val("Registering you...").attr({disabled: true});
                $("#registration_form").ajaxSubmit({
                    success: function(response) {
                        var response = JSON.parse(response);
                        if (response.success) {
                            $("#splash").html(response.replace_splash_with_html);
                            window.location.hash = "";
                        }
                    }
                })
                return false;
            } else {
                e.preventDefault();
                alert("You didn't finish!"); // temp
            }
        }
    });

    // Setting up tagit for dietary restrictions and teammates
    $(".tagit.diet").tagit({
        allowSpaces:true
    });

    $(".tagit.team").tagit({
        maxTags:3
    });

    $("ul.tagit input").focus(function(){
        $(this).parents("ul").css("box-shadow", "inset 1px -35px 0px -1px #404040");
        $(this).parents("ul").children("li.tagit-choice").css("background-color", "#404040");
    });

    $("ul.tagit input").focusout(function(){
        $(this).parents("ul").css("box-shadow", "inset 1px -3px 0px -1px rgba(59,142,185,0.5)");
        $(this).parents("ul").children("li.tagit-choice").css("background-color", "rgb(59,142,185)");
    });

    

    $(function() {
    var availableTags = [
      {"value":"ActionScript",l:"l"},
      {"value":"BctionScript",l:"l"}
    ];
    $( ".schools" ).autocomplete({
      source: availableTags
    });
  });
})

</script>
